<h1>ユーザー一覧</h1>
<table class="table table-striped">
  <thead>
    <tr>
      <th>ID</th>
      <th>名前</th>
      <th>メールアドレス</th>
      <th>ファミリーコード</th>
      <th>家族管理者</th>
      <th>登録日</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <% @users.each do |user| %>
      <tr>
        <td><%= user.id %></td>
        <td><%= link_to user.name, admin_user_path(user) %></td>
        <td><%= user.email %></td>
        <td>
          <% if user.family.present? %>
            <span><%= user.family.code %></span>
          <% else %>
            <span class="text-muted">-</span>
          <% end %>
        </td>
        <td class="text-center">
          <%= user.family_admin? ? content_tag(:span, "家族管理者", class: "badge badge-info") : content_tag(:span, "—", class: "text-muted") %>
        </td>
        
        <td><%= user.created_at.strftime("%Y/%m/%d %H:%M") %></td>
        <td>
          <%= link_to "削除", admin_user_path(user),
          method: :delete,
          data: { confirm: "本当に削除しますか？" },
          class: "btn btn-danger btn-sm" %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>

<%= link_to "← 管理者ホームに戻る", admin_root_path, class: "btn btn-secondary" %>